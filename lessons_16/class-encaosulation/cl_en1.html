<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="stylesheet" href="/lessons_16/css/style.css" />
      <title>Class Encapsulation</title>
   </head>
   <body>
      <h4>Задача 1</h4>
      <p>
         Створити клас TDate для роботи із датами у форматі “день.місяць.рік”.
         Дата представляється структурою із трьома полями. Реалізувати методи
         збільшення/зменшення дати на певну кількість днів, місяців чи років.
         Введення та виведення дати реалізувати за допомогою методу toString.
      </p>
      <script>
         "use strict"
			// ----опис властивості----
			// день
			// місяць
			// рік
			// -----мтоди-----
			// збільшення дати на певну кількість днів, місяців, років
			// зменшення дати на певну кількість днів, місяців, років
			// введенн/виведення дати реалізувати за допомогою toString


			class TDate{
				#day
				#month
				#year
				constructor(day, month, year){
					this.Day = day,// 16
					this.Month = month,// 10
					this.Year = year// 2000
				}
				// описую властивість з get та set
				// -------------------------------
				get Day (){
					return this.#day
				}
				set Day (newDay){
					// дозволяю зберегти значення
					if(newDay < 1) throw new Error ('Некоректна дата дня.')
					this.#day = newDay
				}
				get Month (){
					return this.#month
				}
				set Month (newMont) {
					// валідність нового значення
					if(newMont < 1) throw new Error ('Некоректне  число місяця.')
					// дозволяю зберегти значення
					this.#month = newMont
				}
				get Year (){
					return this.#year
				}
				set Year (newYear) {
					// валідність нового значення
					if(newYear < 0) throw new Error ('Некоректне  число року.')
					// дозволяю зберегти значення
					this.#year = newYear
				}
// ------------------------
// ------------------------
				// корегую дні лише якщо 31 день в місяці
				correctDay (newDay){
					// збільшення дати
					let sumDay = newDay + this.Day
					if(sumDay > 31){
						let d = sumDay % 31
						this.Day = d
						this.Month += Math.floor(sumDay/ 31)
					}
					else this.Day = sumDay
					}
				correctDayMinus (newDay){
					// // зменшення дати
					if(this.Day < newDay){
						let d = newDay % 31
						if(d > this.Day){
						this.Day = d - this.Day
						this.Month -= Math.floor((this.Day + newDay) / 31)
						}
						else {
							this.Day = this.Day - d
							this.Month -= Math.floor((this.Day + newDay) / 31)
						}
					}
					else this.Day -= newDay
					// if(this.Day < newDay){
					// 	let d = (newDay % 31) - 16 //27 -16
					// 	this.Day = d
					// 	this.Month -= Math.ceil(newDay / 31)
					// }
					// else this.Day -= newDay

					// if(this.Day < newDay){
					// 	let month = 31
					// 	let day = newDay + this.Day
					// 	let d = day % 31
					// 	this.Day = month - d
					// 	  // 27 -16
					// 	this.Month -= Math.floor(day / 31)
					// }
					// else this.Day -= newDay
				}
				correctMonth (newMonth){
					// збільшення місяця
					let sumM = this.Month + newMonth
					if(sumM > 12){
						let m = Math.floor(sumM % 12) 
						let y =  Math.floor(sumM / 12) 
						this.Month = m
						this.Year += y
					}
					else this.Month += newMonth
				}
				correctMonthMinus (newMonth){
					// зменшення місяця
					let sumM =  this.Month + newMonth
					if(sumM > 12){
						let m  = sumM % 12
						this.Month =  m
						this.Year -= Math.floor(sumM / 12)
						}
						else this.Month -= newMonth
					}
				correctYears (newYear){
					// збільшення року
						this.Year += newYear
					}
				correctYearsMinus (newYear){
					// зменшення року
						this.Year -= newYear
					}
// ------------------------
// ------------------------
				// збільшення дати
				magnificationDay (newDay){
					this.correctDay(newDay)
					this.toString()
				}
				// зменшення дати
				reductionDay (newDay){
					this.correctDayMinus(newDay)
					this.toString()
				}
				// збільшення місяця
				magnificationMonth (newMonth){
					this.correctMonth (newMonth)
					this.toString()
				}
				// зменшення місяця
				reductionMonthMinus (newMonth){
					this.correctMonthMinus (newMonth)
					this.toString()
				}
				// збільшення року
				magnificationYears (newYear){
					this.correctYears(newYear)
					this.toString()
				}
				// зменшення року
				reductionYearsMinus (newYear){
					this.correctYearsMinus(newYear)
					this.toString()
				}
				// ---------
				toString (){
					return `${this.Day} . ${this.Month} . ${this.Year} <br>`
				}
			}
		
			let newDate = new TDate (16, 10, 2000)
			document.write(newDate);
			newDate.magnificationDay(15)
			document.write(newDate);
			newDate.reductionDay(25)
			document.write(newDate);
			newDate.magnificationMonth (3)
			document.write(newDate);
			newDate.reductionMonthMinus(31)
			document.write(newDate);
			newDate.magnificationYears(33)
			document.write(newDate);
			newDate.reductionYearsMinus(40)
			document.write(newDate);
      </script>
   </body>
</html>
